<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CORE TRAINER</title>

    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' fill='%23ffffff'/%3E%3Cg fill='%23000000'%3E%3Crect x='10' y='10' width='45' height='30'/%3E%3Crect x='65' y='10' width='45' height='30'/%3E%3Crect x='10' y='45' width='45' height='30'/%3E%3Crect x='65' y='45' width='45' height='30'/%3E%3Crect x='10' y='80' width='45' height='30'/%3E%3Crect x='65' y='80' width='45' height='30'/%3E%3C/g%3E%3C/svg%3E">

    <style>
        :root { --black: #000; --white: #fff; --gray: #e0e0e0; --accent: #000; }
        * { box-sizing: border-box; font-family: "Courier New", Courier, monospace; border-radius: 0 !important; -webkit-tap-highlight-color: transparent; }
        body { background: var(--white); color: var(--black); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        header { width: 100%; max-width: 400px; border-bottom: 2px solid var(--black); margin-bottom: 20px; padding-bottom: 10px; }
        
        /* Timer & Content */
        #timer-container, .workout-content { width: 100%; max-width: 400px; border: 2px solid var(--black); padding: 20px; margin-bottom: 20px; }
        #display { font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 10px; }
        
        button { background: var(--white); border: 1px solid var(--black); padding: 10px; cursor: pointer; text-transform: uppercase; font-weight: bold; color: var(--black); appearance: none; -webkit-appearance: none; }
        button:active { background: var(--black); color: var(--white); }

        .tabs { display: flex; width: 100%; max-width: 400px; margin-bottom: -2px; }
        .tab-btn { flex: 1; border: 2px solid var(--black); border-bottom: none; background: var(--gray); }
        .tab-btn.active { background: var(--white); border-bottom: 2px solid var(--white); z-index: 1; }
        .workout-content { display: none; }
        .workout-content.active { display: block; }

        .exercise-item { border-bottom: 1px solid var(--gray); padding: 10px 0; }
        .row { display: flex; justify-content: space-between; align-items: center; }
        
        input[type="checkbox"] { width: 30px; height: 30px; border: 2px solid var(--black); appearance: none; -webkit-appearance: none; display: flex; align-items: center; justify-content: center; background: var(--white); }
        input[type="checkbox"]:checked { background: var(--black); }
        input[type="checkbox"]:checked::after { content: 'X'; color: var(--white); }

        .details { display: none; font-size: 0.8rem; background: #eee; padding: 10px; margin-top: 10px; border: 1px dashed var(--black); }

        /* Tracker Grid */
        .tracker-section { width: 100%; max-width: 400px; border: 2px solid var(--black); padding: 15px; margin-top: 20px; }
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 10px; }
        .day-sq { width: 100%; aspect-ratio: 1; border: 1px solid var(--gray); background: var(--white); }
        .day-sq.active { background: var(--black); }
        .tracker-title { font-size: 0.8rem; text-transform: uppercase; font-weight: bold; }
    </style>
</head>
<body>

    <header><h1>CORE_PROG_V2</h1></header>

    <div id="timer-container">
        <div id="display">00:00</div>
        <div style="display:flex; gap:5px; justify-content: center;">
            <button onclick="startTimer()">Start</button>
            <button onclick="stopTimer()">Stop</button>
            <button onclick="resetTimer()">Reset</button>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('A')">WORKOUT A</button>
        <button class="tab-btn" onclick="openTab('B')">WORKOUT B</button>
    </div>

    <div id="workoutA" class="workout-content active">
        <div class="exercise-item"><div class="row"><span>1. DEAD BUGS (3x12)</span><input type="checkbox" id="a1"></div><button onclick="toggleDetails('d1')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d1" class="details">Slow. Glue lower back to floor.</div></div>
        <div class="exercise-item"><div class="row"><span>2. BICYCLE (3x20)</span><input type="checkbox" id="a2"></div><button onclick="toggleDetails('d2')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d2" class="details">Rotate from ribs. 1s hold.</div></div>
        <div class="exercise-item"><div class="row"><span>3. REVERSE (3x15)</span><input type="checkbox" id="a3"></div><button onclick="toggleDetails('d3')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d3" class="details">Curling pelvis, no momentum.</div></div>
        <div class="exercise-item"><div class="row"><span>4. HOLLOW (3xMAX)</span><input type="checkbox" id="a4"></div><button onclick="toggleDetails('d4')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d4" class="details">Legs out, back flat.</div></div>
    </div>

    <div id="workoutB" class="workout-content">
        <div class="exercise-item"><div class="row"><span>1. LONG PLANK (3x60s)</span><input type="checkbox" id="b1"></div><button onclick="toggleDetails('d5')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d5" class="details">Elbows forward. Brace core.</div></div>
        <div class="exercise-item"><div class="row"><span>2. BIRD-DOG (3x10)</span><input type="checkbox" id="b2"></div><button onclick="toggleDetails('d6')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d6" class="details">No hip wobble. Flat back.</div></div>
        <div class="exercise-item"><div class="row"><span>3. SIDE PLANK (3x45s)</span><input type="checkbox" id="b3"></div><button onclick="toggleDetails('d7')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d7" class="details">Stack feet. Hips high.</div></div>
        <div class="exercise-item"><div class="row"><span>4. GLUTE BRIDGE (2x20)</span><input type="checkbox" id="b4"></div><button onclick="toggleDetails('d8')" style="font-size:0.6rem; margin-top:5px;">INFO</button><div id="d8" class="details">Squeeze glutes. Support spine.</div></div>
    </div>

    <div class="tracker-section">
        <div class="tracker-title">Last 28 Days</div>
        <div class="grid" id="history-grid"></div>
        <button onclick="logWorkout()" style="width:100%; margin-top:15px;">LOG SESSION DONE</button>
    </div>

    <button onclick="clearAll()" style="margin-top:20px; font-size:0.7rem; border:none; text-decoration: underline;">Reset All Data</button>

    <script>
        function openTab(t) {
            document.querySelectorAll('.workout-content, .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById('workout'+t).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function toggleDetails(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }

        let timer, sec = 0;
        function startTimer() { if(!timer) timer = setInterval(()=>{ sec++; let m=Math.floor(sec/60).toString().padStart(2,'0'), s=(sec%60).toString().padStart(2,'0'); document.getElementById('display').innerText=m+":"+s; }, 1000); }
        function stopTimer() { clearInterval(timer); timer = null; }
        function resetTimer() { stopTimer(); sec = 0; document.getElementById('display').innerText="00:00"; }

        // LocalStorage for Checks
        const checks = document.querySelectorAll('input[type="checkbox"]');
        checks.forEach(c => {
            c.addEventListener('change', () => localStorage.setItem(c.id, c.checked));
            if(localStorage.getItem(c.id)==='true') c.checked = true;
        });

        // Tracker Logic
        function logWorkout() {
            const today = new Date().toISOString().split('T')[0];
            let history = JSON.parse(localStorage.getItem('workoutHistory') || "[]");
            if(!history.includes(today)) history.push(today);
            localStorage.setItem('workoutHistory', JSON.stringify(history));
            renderGrid();
            alert("Workout Logged!");
        }

        function renderGrid() {
            const grid = document.getElementById('history-grid');
            grid.innerHTML = '';
            const history = JSON.parse(localStorage.getItem('workoutHistory') || "[]");
            for(let i=27; i>=0; i--) {
                const d = new Date();
                d.setDate(d.getDate() - i);
                const dateStr = d.toISOString().split('T')[0];
                const sq = document.createElement('div');
                sq.className = 'day-sq' + (history.includes(dateStr) ? ' active' : '');
                grid.appendChild(sq);
            }
        }

        function clearAll() { if(confirm("Clear everything?")) { localStorage.clear(); location.reload(); } }
        renderGrid();
    </script>
</body>
</html>